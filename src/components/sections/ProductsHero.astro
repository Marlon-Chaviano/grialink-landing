---
/**
 * ProductsHero — Hero section for the Products page.
 * Badge, gradient headline, subtitle, and Sales Hub dashboard mockup
 * with floating intelligent sales alerts card.
 */
import { Image } from "astro:assets";
import Container from "@/components/ui/Container.astro";
import { type Lang } from "@/i18n/config";
import { getTranslations } from "@/i18n/utils";
import salesHub from "@/assets/sales-hub/sales-hub.png";
import lightSalesHub from "@/assets/sales-hub/light-sales-hub.png";

interface Props {
	lang: Lang;
}

const { lang } = Astro.props;
const p = getTranslations(lang, "productsPage") as Record<string, any>;
const hero = p.hero as Record<string, any>;
const alerts = (hero.alerts ?? []) as Array<{ label: string; value: string; trend: string }>;
---

<section class="relative overflow-hidden pt-28 pb-24 lg:pt-36 lg:pb-40">
	<!-- Decorative mesh background -->
	<div
		class="absolute inset-0 pointer-events-none"
		aria-hidden="true"
		style="background-image: radial-gradient(at 40% 20%, rgba(253,113,0,0.08) 0px, transparent 50%), radial-gradient(at 80% 0%, rgba(56,189,248,0.05) 0px, transparent 50%), radial-gradient(at 0% 50%, rgba(232,121,249,0.04) 0px, transparent 50%);"
	>
	</div>

	<Container class="relative z-10">
		<!-- Text block -->
		<div
			class="text-center max-w-4xl mx-auto mb-16"
			data-animate
		>
			<!-- Badge -->
			<div
				class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs font-semibold uppercase tracking-wider mb-6"
			>
				<span
					class="w-2 h-2 rounded-full bg-primary animate-pulse"
					aria-hidden="true"
				></span>
				{hero.badge}
			</div>

			<h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-extrabold tracking-tight text-foreground mb-6 leading-[1.08]">
				{hero.titleLine1}<br class="hidden md:block" />
				<span class="text-gradient-primary">{hero.titleHighlight}</span>
			</h1>

			<p class="text-lg sm:text-xl text-muted-foreground max-w-2xl mx-auto font-light leading-relaxed">
				{hero.subtitle}
			</p>
		</div>

		<!-- Dashboard mockup -->
		<div
			class="relative max-w-5xl mx-auto group"
			data-animate
		>
			<!-- Gradient glow behind -->
			<div
				class="absolute -inset-1 bg-linear-to-r from-primary to-purple-600 rounded-2xl blur opacity-15 group-hover:opacity-25 transition-opacity duration-1000"
				aria-hidden="true"
			>
			</div>

			<div class="relative bg-card rounded-2xl shadow-2xl border border-border overflow-hidden">
				<div class="aspect-[16/9] w-full bg-background-lighter relative overflow-hidden">
					<!-- Window chrome -->
					<div class="absolute top-0 w-full h-12 bg-card border-b border-border-light flex items-center px-4 gap-2 z-10">
						<div class="w-3 h-3 rounded-full bg-red-400"></div>
						<div class="w-3 h-3 rounded-full bg-yellow-400"></div>
						<div class="w-3 h-3 rounded-full bg-green-400"></div>
					</div>

					<!-- Dashboard screenshot — Sales Hub (dark / light) -->
					<div class="w-full h-full mt-12 relative">
						<Image
							src={salesHub}
							alt={hero.dashboardAlt}
							class="w-full h-full object-cover object-top dark-only"
							loading="eager"
							decoding="async"
							fetchpriority="high"
							widths={[640, 1024, 1920]}
							sizes="(max-width: 1024px) 100vw, 1120px"
						/>
						<Image
							src={lightSalesHub}
							alt={hero.dashboardAlt}
							class="w-full h-full object-cover object-top light-only"
							loading="eager"
							decoding="async"
							fetchpriority="high"
							widths={[640, 1024, 1920]}
							sizes="(max-width: 1024px) 100vw, 1120px"
						/>
					</div>
				</div>
			</div>
		</div>

		<!-- Critical alerts card — below dashboard -->
		<div
			class="max-w-sm mx-auto -mt-8 relative z-10 bg-card/95 backdrop-blur-md rounded-xl p-4 shadow-xl border border-red-500/30"
			data-animate
		>
			<div class="flex items-center gap-2 mb-3">
				<div class="w-8 h-8 rounded-lg bg-red-500/15 flex items-center justify-center text-red-500">
					<svg
						class="w-4 h-4"
						fill="none"
						stroke="currentColor"
						viewBox="0 0 24 24"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"
						></path>
					</svg>
				</div>
				<p class="text-xs font-bold text-red-500 uppercase tracking-wider">{hero.alertsTitle}</p>
			</div>

			<div class="space-y-2.5">
				{
					alerts.map((alert) => (
						<div class="flex items-center justify-between bg-red-500/5 rounded-lg px-3 py-2 border border-red-500/10">
							<span class="text-xs text-muted-foreground font-medium">{alert.label}</span>
							<div class="flex items-center gap-1.5">
								<span class="text-sm font-bold text-foreground">{alert.value}</span>
								<span class="text-[10px] font-semibold px-1.5 py-0.5 rounded-full bg-red-500/15 text-red-500">{alert.trend}</span>
							</div>
						</div>
					))
				}
			</div>
		</div>
	</Container>
</section>
