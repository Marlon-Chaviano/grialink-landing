---
import Container from "@/components/ui/Container.astro";
import { type Lang, localizedHref } from "@/i18n/config";
import { getTranslations } from "@/i18n/utils";

interface Props {
	lang: Lang;
}

const { lang } = Astro.props;
const ft = getTranslations(lang, "footer") as Record<string, any>;

const currentYear = new Date().getFullYear();
const copyrightText = (ft.copyright as string)?.replace("{year}", String(currentYear)) ?? `© ${currentYear} Grialink Systems.`;
const footerGroups = (ft.groups ?? []) as Array<{
	title: string;
	links: Array<{ label: string; href: string }>;
}>;
---

<footer
	class="bg-secondary border-t border-border-light"
	aria-label={lang === "es" ? "Pie de página" : "Site footer"}
>
	<Container>
		<!-- Main footer content -->
		<div class="py-12 grid grid-cols-2 md:grid-cols-4 gap-8">
			<!-- Brand -->
			<div class="col-span-2 md:col-span-1">
				<a
					href={`/${lang}`}
					class="flex items-center gap-2 mb-4"
				>
					<img
						src="/logo.png"
						alt="Grialink"
						class="h-7 w-7 rounded-lg object-cover"
						loading="lazy"
						decoding="async"
						width="28"
						height="28"
					/>
					<span class="font-bold text-foreground text-lg">{ft.brand}</span>
				</a>
				<p class="text-sm text-muted-foreground max-w-xs leading-relaxed">
					{ft.tagline}
				</p>
			</div>

			<!-- Link columns -->
			{
				footerGroups.map((group) => (
					<nav aria-label={group.title}>
						<p class="font-semibold text-foreground text-sm mb-4">{group.title}</p>
						<ul class="space-y-2">
							{group.links.map((link) => (
								<li>
									<a
										href={localizedHref(link.href, lang)}
										class="text-sm text-muted-foreground hover:text-primary transition-colors"
									>
										{link.label}
									</a>
								</li>
							))}
						</ul>
					</nav>
				))
			}
		</div>

		<!-- Bottom bar -->
		<div class="py-6 border-t border-border-light flex flex-col sm:flex-row justify-between items-center gap-4">
			<p class="text-sm text-muted-foreground">
				{copyrightText}
			</p>
		</div>
	</Container>
</footer>
